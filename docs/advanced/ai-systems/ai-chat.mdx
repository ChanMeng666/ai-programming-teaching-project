---
sidebar_position: 2
title: AIå¯¹è¯ç³»ç»Ÿå¼€å‘
description: å­¦ä¹ å¦‚ä½•å¼€å‘ä¸­å›½è‰ºäººAIå¯¹è¯ç³»ç»Ÿï¼ŒåŒ…æ‹¬ç¯å¢ƒå‡†å¤‡ã€é¡¹ç›®å¼€å‘å’Œéƒ¨ç½²ç»´æŠ¤
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import ReactPlayer from 'react-player';

# AIå¯¹è¯ç³»ç»Ÿå¼€å‘

åœ¨è¿™ä¸ªç« èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•å¼€å‘ä¸­å›½è‰ºäººAIå¯¹è¯ç³»ç»Ÿã€‚

## ğŸ¥ æ•™ç¨‹è§†é¢‘

<div className="video-container">
  <div className="video-wrapper">
    <ReactPlayer
      url="https://www.youtube.com/embed/sJdptJj9pAw"
      controls={true}
      width="100%"
      height="100%"
      style={{ aspectRatio: '16/9' }}
    />
  </div>
</div>

## ğŸ“‹ å­¦ä¹ å†…å®¹

### 1. ç¯å¢ƒå‡†å¤‡

#### Hugging Faceé…ç½®
1. è®¿é—® [Hugging Face](https://huggingface.co/join) æ³¨å†Œè´¦å·
2. ç”Ÿæˆè®¿é—®ä»¤ç‰Œï¼š
   - è®¿é—® [Tokenè®¾ç½®é¡µé¢](https://huggingface.co/settings/tokens)
   - ç‚¹å‡» "New token"
   - é€‰æ‹© "Write" æƒé™
   - ç”Ÿæˆä»¤ç‰Œå¹¶ä¿å­˜

:::caution é‡è¦æç¤º
ä»¤ç‰Œéå¸¸é‡è¦ï¼Œè¯·å¦¥å–„ä¿å­˜ï¼Œå…³é—­é¡µé¢åå°†æ— æ³•å†æ¬¡æŸ¥çœ‹å®Œæ•´ä»¤ç‰Œ
:::

#### å¼€å‘ç¯å¢ƒé…ç½®
<Tabs>
  <TabItem value="required" label="å¿…éœ€è½¯ä»¶" default>
    1. Python 3.8+
    2. Git
    3. Cursorç¼–è¾‘å™¨
  </TabItem>
  <TabItem value="dependencies" label="ä¾èµ–å®‰è£…">
    ```bash
    # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
    python -m venv venv
    
    # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
    # Windows:
    venv\Scripts\activate
    # Linux/Mac:
    source venv/bin/activate
    
    # å®‰è£…ä¾èµ–
    pip install gradio huggingface_hub
    ```
  </TabItem>
</Tabs>

### 2. é¡¹ç›®åˆ›å»º

#### Hugging Face Spaceè®¾ç½®
1. ç™»å½•Hugging Face
2. ç‚¹å‡» "New Space"
3. å¡«å†™åŸºæœ¬ä¿¡æ¯ï¼š
   - Owner: ä½ çš„ç”¨æˆ·å
   - Space name: role-play-chat
   - SDK: Gradio
   - Hardware: CPU basic
   - Visibility: Public

#### æœ¬åœ°é¡¹ç›®é…ç½®
```bash
# å…‹éš†Spaceä»“åº“
git clone https://huggingface.co/spaces/ä½ çš„ç”¨æˆ·å/role-play-chat
cd role-play-chat

# åˆ›å»ºé¡¹ç›®ç»“æ„
mkdir -p {assets,utils,tests}
touch main.py character_profiles.py dialogue_system.py
```

### 3. ç³»ç»Ÿæ¶æ„è®¾è®¡

```mermaid
graph TD
    A[ç”¨æˆ·ç•Œé¢] --> B[å¯¹è¯ç®¡ç†]
    B --> C[è§’è‰²ç³»ç»Ÿ]
    B --> D[å¯¹è¯å¼•æ“]
    D --> E[æ¨¡å‹æ¥å£]
    C --> F[è§’è‰²é…ç½®]
```

### 4. æ ¸å¿ƒåŠŸèƒ½å®ç°

#### å¯¹è¯ç³»ç»Ÿ
```python
class DialogueSystem:
    def __init__(self):
        self.history = []
        self.current_character = None
        
    async def process_message(self, message: str) -> str:
        """å¤„ç†ç”¨æˆ·æ¶ˆæ¯å¹¶ç”Ÿæˆå›å¤"""
        if not self.current_character:
            return "è¯·å…ˆé€‰æ‹©å¯¹è¯è§’è‰²"
            
        # æ·»åŠ åˆ°å†å²è®°å½•
        self.history.append({"role": "user", "content": message})
        
        # ç”Ÿæˆå›å¤
        response = await self._generate_response(message)
        self.history.append({"role": "assistant", "content": response})
        
        return response
        
    def manage_context(self, max_length: int = 2048):
        """ç®¡ç†å¯¹è¯ä¸Šä¸‹æ–‡é•¿åº¦"""
        context_length = sum(len(msg["content"]) for msg in self.history)
        
        while context_length > max_length and len(self.history) > 1:
            removed = self.history.pop(0)
            context_length -= len(removed["content"])
```

#### è§’è‰²ç³»ç»Ÿ
```python
class Character:
    def __init__(self, name: str, profile: dict):
        self.name = name
        self.background = profile.get("background", "")
        self.personality = profile.get("personality", [])
        self.speaking_style = profile.get("speaking_style", {})
        
    def get_prompt(self) -> str:
        """ç”Ÿæˆè§’è‰²æç¤ºè¯"""
        return f"""
        ä½ ç°åœ¨æ‰®æ¼”{self.name}ã€‚
        èƒŒæ™¯ï¼š{self.background}
        æ€§æ ¼ï¼š{', '.join(self.personality)}
        è¯´è¯é£æ ¼ï¼š{self.speaking_style}
        """
```

### 5. æµ‹è¯•ä¸éƒ¨ç½²

#### æµ‹è¯•è§„èŒƒ
```python
# tests/test_dialogue.py
import pytest
from dialogue_system import DialogueSystem

def test_dialogue_initialization():
    system = DialogueSystem()
    assert system.history == []
    assert system.current_character is None

@pytest.mark.asyncio
async def test_message_processing():
    system = DialogueSystem()
    system.current_character = Character("æµ‹è¯•è§’è‰²", {})
    
    response = await system.process_message("ä½ å¥½")
    assert isinstance(response, str)
    assert len(system.history) == 2
```

#### éƒ¨ç½²æµç¨‹
1. æäº¤ä»£ç åˆ°GitHub
2. æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
3. ç›‘æ§ç³»ç»Ÿæ€§èƒ½

### 6. æœ€ä½³å®è·µ

#### ä»£ç è§„èŒƒ
```python
# è‰¯å¥½çš„å‘½åå’Œæ³¨é‡Šç¤ºä¾‹
class DialogueManager:
    """å¯¹è¯ç®¡ç†å™¨ï¼Œè´Ÿè´£å¤„ç†ç”¨æˆ·è¾“å…¥å’Œç”Ÿæˆå›å¤
    
    Attributes:
        history (List[Dict]): å¯¹è¯å†å²è®°å½•
        character (Character): å½“å‰é€‰æ‹©çš„è§’è‰²
        max_history_length (int): æœ€å¤§å†å²è®°å½•é•¿åº¦
    """
    
    def __init__(self, max_history_length: int = 100):
        self.history = []
        self.character = None
        self.max_history_length = max_history_length
```

#### æ€§èƒ½ä¼˜åŒ–
```python
from functools import lru_cache

@lru_cache(maxsize=1000)
def get_character_profile(character_id: str) -> dict:
    """è·å–è§’è‰²é…ç½®ä¿¡æ¯ï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰"""
    return load_character_profile(character_id)

# å¼‚æ­¥å¤„ç†
async def process_messages(messages: list) -> list:
    """å¹¶è¡Œå¤„ç†å¤šæ¡æ¶ˆæ¯"""
    tasks = [process_single(msg) for msg in messages]
    return await asyncio.gather(*tasks)
```

#### å®‰å…¨å®è·µ
```python
from pydantic import BaseModel, validator

class UserInput(BaseModel):
    message: str
    character_id: str = None
    
    @validator('message')
    def validate_message(cls, v):
        if len(v) > 1000:
            raise ValueError('æ¶ˆæ¯é•¿åº¦ä¸èƒ½è¶…è¿‡1000å­—ç¬¦')
        if not v.strip():
            raise ValueError('æ¶ˆæ¯ä¸èƒ½ä¸ºç©º')
        return v.strip()
```

:::info é¡¹ç›®ç‰¹ç‚¹
- æ”¯æŒå¤šè§’è‰²å¯¹è¯
- æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†
- å®æ—¶å“åº”å¤„ç†
- å®Œæ•´çš„é”™è¯¯å¤„ç†æœºåˆ¶
:::

è¿™ä¸ªAIå¯¹è¯ç³»ç»Ÿé¡¹ç›®å±•ç¤ºäº†å¦‚ä½•æ„å»ºä¸€ä¸ªå®Œæ•´çš„AIåº”ç”¨ï¼Œä»ç¯å¢ƒé…ç½®åˆ°éƒ¨ç½²ç»´æŠ¤çš„å…¨æµç¨‹ã€‚ 