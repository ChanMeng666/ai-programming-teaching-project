---
sidebar_position: 5
title: 文本处理与存储
description: 设置Text Processing节点和Notion集成
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Admonition from '@theme/Admonition';

# 📝 文本处理与存储

<div className="hero shadow--md">
  <div className="container">
    <p>
      本章将指导你配置Text Processing节点处理AI生成的摘要，并通过Notion API实现数据持久化存储。
    </p>
  </div>
</div>

## 🔄 Text Processing配置

<div className="row">
  <div className="col col--6">
    <div className="card margin-bottom--lg">
      <div className="card__header">
        <h3>🔗 节点连接</h3>
      </div>
      <div className="card__body">
        <ol>
          <li>添加Text Processing节点</li>
          <li>连接到LLM节点输出</li>
          <li>配置数据流向</li>
        </ol>
      </div>
    </div>
  </div>
  <div className="col col--6">
    <div className="card margin-bottom--lg">
      <div className="card__header">
        <h3>📊 数据流转</h3>
      </div>
      <div className="card__body">
        <ul>
          <li>📥 接收LLM输出</li>
          <li>🔄 格式化处理</li>
          <li>📤 传递到存储节点</li>
        </ul>
      </div>
    </div>
  </div>
</div>

## ⚙️ 参数配置

<Tabs>
  <TabItem value="input" label="输入设置" default>
    <div className="step-content">
      <h3>1️⃣ 输入参数</h3>
      
      ```typescript
      // 输入参数配置
      {
        "String1": "{{llm.output.output}}"
      }
      ```
      
      <Admonition type="tip" title="配置说明">
        <p>使用模板语法引用LLM节点的输出内容</p>
      </Admonition>
    </div>
  </TabItem>
  <TabItem value="template" label="格式模板">
    <div className="step-content">
      <h3>2️⃣ 文本模板</h3>
      
      ```text
      =========================================
                    文章摘要
      =========================================

      {{String1}}
      =========================================
      ```
      
      <Admonition type="info" title="模板说明">
        <ul>
          <li>使用分隔符提高可读性</li>
          <li>保持格式统一规范</li>
          <li>便于后续内容检索</li>
        </ul>
      </Admonition>
    </div>
  </TabItem>
</Tabs>

## 💾 Notion集成

<div className="notion-setup">
  <div className="row">
    <div className="col col--6">
      <div className="card margin-bottom--lg">
        <div className="card__header">
          <h3>📥 Write Page配置</h3>
        </div>
        <div className="card__body">
          <ol>
            <li>添加Write Page节点</li>
            <li>连接到Text Processing节点</li>
            <li>配置Notion参数</li>
          </ol>
          
          ```typescript
          // Notion参数配置
          {
            "page_id": "你的Notion页面ID",
            "text": "{{Text Processing.output}}"
          }
          ```
        </div>
      </div>
    </div>
    <div className="col col--6">
      <div className="card margin-bottom--lg">
        <div className="card__header">
          <h3>⚠️ 注意事项</h3>
        </div>
        <div className="card__body">
          <Admonition type="caution" title="常见问题">
            <ul>
              <li>确保页面ID正确</li>
              <li>验证访问权限</li>
              <li>检查Token有效性</li>
            </ul>
          </Admonition>
        </div>
      </div>
    </div>
  </div>
</div>

## 🛠️ 优化建议

<div className="optimization-section">
  <Tabs>
    <TabItem value="format" label="格式优化" default>
      <div className="card">
        <div className="card__body">
          <h4>📋 文本格式</h4>
          <ul>
            <li>调整分隔符样式</li>
            <li>优化排版布局</li>
            <li>提高可读性</li>
          </ul>
        </div>
      </div>
    </TabItem>
    <TabItem value="storage" label="存储优化">
      <div className="card">
        <div className="card__body">
          <h4>📚 存储结构</h4>
          <ul>
            <li>规范化数据组织</li>
            <li>添加元数据标记</li>
            <li>优化检索效率</li>
          </ul>
        </div>
      </div>
    </TabItem>
    <TabItem value="error" label="错误处理">
      <div className="card">
        <div className="card__body">
          <h4>🔧 异常处理</h4>
          <ul>
            <li>启用异常忽略</li>
            <li>添加错误日志</li>
            <li>实现重试机制</li>
          </ul>
        </div>
      </div>
    </TabItem>
  </Tabs>
</div>

<div className="alert alert--success" role="alert">
  <h4>🎉 配置完成！</h4>
  <p>
    文本处理和存储配置已完成，接下来让我们进行<a href="./testing-optimization"><b>整体测试和优化</b></a>。
  </p>
</div>

export const styles = {
  notionSetup: {
    marginTop: '2rem',
  },
  optimizationSection: {
    marginTop: '2rem',
    marginBottom: '2rem',
  },
  stepContent: {
    padding: '1rem',
    backgroundColor: 'var(--ifm-background-surface-color)',
    borderRadius: '8px',
  },
};