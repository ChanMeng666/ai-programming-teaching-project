---
title: AI-Assisted Diagram Creation
sidebar_position: 6
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import Admonition from '@theme/Admonition';

# AI-Assisted Diagram Creation

## ğŸ¤– Efficiently Creating Diagrams with Gemini CLI

### Natural Language Diagram Generation

<Tabs>
  <TabItem value="describe" label="Description Generation" default>

<CodeBlock language="text">
{`You: I need a diagram showing the user registration process, including:
1. User fills out form
2. Email verification
3. Phone verification (optional)
4. Create account
5. Send welcome email

Gemini: I'll generate a user registration flowchart for you:

\`\`\`mermaid
graph TD
    Start[ç”¨æˆ·è®¿é—®æ³¨å†Œé¡µé¢] --> Form[å¡«å†™æ³¨å†Œè¡¨å•]
    Form --> Validate{è¡¨å•éªŒè¯}
    Validate -->|å¤±è´¥| FormError[æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯]
    FormError --> Form
    Validate -->|æˆåŠŸ| Email[å‘é€éªŒè¯é‚®ä»¶]
    Email --> EmailCheck{ç”¨æˆ·ç‚¹å‡»éªŒè¯é“¾æ¥?}
    EmailCheck -->|å¦| EmailTimeout[éªŒè¯è¶…æ—¶]
    EmailTimeout --> Resend[é‡æ–°å‘é€é‚®ä»¶]
    Resend --> Email
    EmailCheck -->|æ˜¯| PhoneOption{éœ€è¦æ‰‹æœºéªŒè¯?}
    PhoneOption -->|æ˜¯| Phone[è¾“å…¥æ‰‹æœºå·]
    Phone --> SMS[å‘é€éªŒè¯ç ]
    SMS --> PhoneVerify{éªŒè¯ç æ­£ç¡®?}
    PhoneVerify -->|å¦| PhoneError[éªŒè¯å¤±è´¥]
    PhoneError --> Phone
    PhoneVerify -->|æ˜¯| CreateAccount[åˆ›å»ºè´¦æˆ·]
    PhoneOption -->|å¦| CreateAccount
    CreateAccount --> Welcome[å‘é€æ¬¢è¿é‚®ä»¶]
    Welcome --> Success[æ³¨å†ŒæˆåŠŸ]
\`\`\`

This flowchart clearly shows the complete registration process, including error handling and optional steps.`}
</CodeBlock>

  </TabItem>
  <TabItem value="optimize" label="Optimize Existing Diagrams">

<CodeBlock language="text">
{`You: This is my diagram code, please help me optimize the layout and style:
graph LR
A --> B
B --> C
C --> D
D --> E

Gemini: I'll optimize your diagram to improve readability and aesthetics:

\`\`\`mermaid
graph TB
    A[å¼€å§‹é˜¶æ®µ] -->|åˆå§‹åŒ–| B[å‡†å¤‡é˜¶æ®µ]
    B -->|æ•°æ®æ”¶é›†| C[å¤„ç†é˜¶æ®µ]
    C -->|åˆ†æå¤„ç†| D[éªŒè¯é˜¶æ®µ]
    D -->|è´¨é‡æ£€æŸ¥| E[å®Œæˆé˜¶æ®µ]

    style A fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    style B fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style C fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style D fill:#fff8e1,stroke:#f57f17,stroke-width:2px
    style E fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px

    classDef default font-size:16px;
\`\`\`

Optimizations:
1. Changed to top-to-bottom layout (TB), better fits reading habits for processes
2. Added descriptive text to each node
3. Added action descriptions on connecting lines
4. Used different colors to distinguish phases
5. Unified font size to improve readability`}
</CodeBlock>

  </TabItem>
  <TabItem value="batch" label="Batch Generation">

<CodeBlock language="text">
{`You: I need to generate sequence diagrams for 5 different API endpoints

Gemini: I'll batch generate API sequence diagrams for you:

1ï¸âƒ£ User Login API:
\`\`\`mermaid
sequenceDiagram
    Client->>+API: POST /auth/login
    API->>+DB: æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
    DB-->>-API: è¿”å›ç”¨æˆ·æ•°æ®
    API->>+Redis: åˆ›å»º Session
    Redis-->>-API: Session ID
    API-->>-Client: JWT Token
\`\`\`

2ï¸âƒ£ Get User Info API:
\`\`\`mermaid
sequenceDiagram
    Client->>+API: GET /users/{id}
    API->>+Auth: éªŒè¯ Token
    Auth-->>-API: éªŒè¯æˆåŠŸ
    API->>+Cache: æŸ¥è¯¢ç¼“å­˜
    Cache-->>API: ç¼“å­˜æœªå‘½ä¸­
    API->>+DB: æŸ¥è¯¢ç”¨æˆ·
    DB-->>-API: ç”¨æˆ·æ•°æ®
    API->>Cache: æ›´æ–°ç¼“å­˜
    API-->>-Client: ç”¨æˆ·ä¿¡æ¯
\`\`\`

3ï¸âƒ£ Create Order API:
\`\`\`mermaid
sequenceDiagram
    Client->>+API: POST /orders
    API->>+Inventory: æ£€æŸ¥åº“å­˜
    Inventory-->>-API: åº“å­˜å……è¶³
    API->>+Payment: åˆ›å»ºæ”¯ä»˜
    Payment-->>-API: æ”¯ä»˜ ID
    API->>+DB: ä¿å­˜è®¢å•
    DB-->>-API: è®¢å• ID
    API->>+Queue: å‘é€é€šçŸ¥æ¶ˆæ¯
    API-->>-Client: è®¢å•åˆ›å»ºæˆåŠŸ
\`\`\`

4ï¸âƒ£ Update Product API:
\`\`\`mermaid
sequenceDiagram
    Client->>+API: PUT /products/{id}
    API->>+Auth: éªŒè¯æƒé™
    Auth-->>-API: æƒé™é€šè¿‡
    API->>+DB: æ›´æ–°äº§å“
    DB-->>-API: æ›´æ–°æˆåŠŸ
    API->>+Cache: æ¸…é™¤ç¼“å­˜
    Cache-->>-API: ç¼“å­˜å·²æ¸…é™¤
    API->>+Search: æ›´æ–°ç´¢å¼•
    Search-->>-API: ç´¢å¼•å·²æ›´æ–°
    API-->>-Client: æ›´æ–°æˆåŠŸ
\`\`\`

5ï¸âƒ£ Delete Comment API:
\`\`\`mermaid
sequenceDiagram
    Client->>+API: DELETE /comments/{id}
    API->>+Auth: éªŒè¯ç”¨æˆ·èº«ä»½
    Auth-->>-API: èº«ä»½ç¡®è®¤
    API->>+DB: è½¯åˆ é™¤è¯„è®º
    DB-->>-API: åˆ é™¤æˆåŠŸ
    API->>+Audit: è®°å½•æ“ä½œæ—¥å¿—
    Audit-->>-API: æ—¥å¿—å·²è®°å½•
    API-->>-Client: åˆ é™¤æˆåŠŸ
\`\`\``}
</CodeBlock>

  </TabItem>
</Tabs>

## ğŸ“ Intelligent Diagram Design Recommendations

### Recommend Diagram Types Based on Content

<CodeBlock language="text">
{`You: I want to show the dependencies between system modules, what diagram should I use?

Gemini: Based on the system module dependencies you want to show, I recommend the following diagram types:

ğŸ¯ Most Recommended: Class Diagram
Suitable for showing static dependencies between modules

\`\`\`mermaid
classDiagram
    CoreModule <-- AuthModule : depends on
    CoreModule <-- DataModule : depends on
    AuthModule <-- UserModule : uses
    DataModule <-- CacheModule : uses
    DataModule <-- DBModule : uses
    APIModule --> AuthModule : requires
    APIModule --> DataModule : requires
    UIModule --> APIModule : calls
\`\`\`

ğŸ”„ Alternative 1: Flowchart (with grouping)
Suitable for showing module hierarchy and data flow

\`\`\`mermaid
graph TB
    subgraph "è¡¨ç°å±‚"
        UI[UI Module]
    end

    subgraph "ä¸šåŠ¡å±‚"
        API[API Module]
        Auth[Auth Module]
    end

    subgraph "æ•°æ®å±‚"
        Data[Data Module]
        Cache[Cache Module]
        DB[DB Module]
    end

    subgraph "åŸºç¡€å±‚"
        Core[Core Module]
    end

    UI --> API
    API --> Auth
    API --> Data
    Auth --> Core
    Data --> Cache
    Data --> DB
    Data --> Core
\`\`\`

ğŸ—ï¸ Alternative 2: Architecture Diagram (Draw.io)
Suitable for showing complex system architecture and deployment relationships
- Use containers to group related modules
- Use different colors for different layers
- Add icons to enhance readability`}
</CodeBlock>

### AI Optimization Recommendations

<div className="ai-suggestions">
  <div className="suggestion-card">
    <h4>ğŸ¨ Visual Optimization</h4>
    <p>AI can help with:</p>
    <ul>
      <li>Recommending color schemes</li>
      <li>Optimizing layout balance</li>
      <li>Adjusting element spacing</li>
      <li>Selecting appropriate fonts</li>
    </ul>
  </div>
  <div className="suggestion-card">
    <h4>ğŸ“Š Content Optimization</h4>
    <p>AI can assist with:</p>
    <ul>
      <li>Simplifying complex processes</li>
      <li>Completing missing steps</li>
      <li>Optimizing text descriptions</li>
      <li>Adding necessary annotations</li>
    </ul>
  </div>
  <div className="suggestion-card">
    <h4>ğŸ”§ Technical Optimization</h4>
    <p>AI can provide:</p>
    <ul>
      <li>Best practice recommendations</li>
      <li>Performance optimization solutions</li>
      <li>Compatibility checking</li>
      <li>Export format recommendations</li>
    </ul>
  </div>
</div>

## ğŸ”„ Diagram Conversion and Migration

### Converting Between Different Formats

<Tabs>
  <TabItem value="mermaid-to-drawio" label="Mermaid â†’ Draw.io" default>

<CodeBlock language="text">
{`You: Convert this Mermaid flowchart to Draw.io format

Gemini: I'll help you convert the Mermaid diagram to Draw.io:

Original Mermaid:
\`\`\`mermaid
graph TD
    A[å¼€å§‹] --> B{åˆ¤æ–­}
    B -->|æ˜¯| C[æ‰§è¡Œ]
    B -->|å¦| D[ç»“æŸ]
\`\`\`

Draw.io implementation steps:

1. Create elements:
   - Drag in "Rounded Rectangle" for A (Start)
   - Drag in "Diamond" for B (Decision)
   - Drag in "Rectangle" for C (Execute)
   - Drag in "Rounded Rectangle" for D (End)

2. Set styles:
   - A: Fill color #e1f5fe, border #01579b
   - B: Fill color #fff3e0, border #e65100
   - C: Fill color #f3e5f5, border #4a148c
   - D: Fill color #e8f5e9, border #1b5e20

3. Add connections:
   - Select "Connector" tool
   - Connect from A to B
   - Connect from B to C, double-click to add label "Yes"
   - Connect from B to D, double-click to add label "No"

4. Layout adjustment:
   - Select all elements
   - Arrange â†’ Layout â†’ Vertical Tree
   - Adjust spacing to appropriate positions`}
</CodeBlock>

  </TabItem>
  <TabItem value="visio-to-mermaid" label="Visio â†’ Mermaid">

<CodeBlock language="text">
{`You: How do I convert Visio diagrams to Mermaid code?

Gemini: Methods for converting Visio diagrams to Mermaid:

ğŸ“‹ Manual conversion steps:

1. Analyze Visio diagram structure:
   - Identify node types (rectangle, diamond, circle, etc.)
   - Record connection relationships
   - Extract text labels

2. Map to Mermaid syntax:
   Visio shapes â†’ Mermaid syntax
   - Rectangle â†’ [text]
   - Diamond â†’ {text}
   - Circle â†’ ((text))
   - Arrow â†’ -->
   - Dashed arrow â†’ -.->

3. Conversion example:
   Visio: Start(rectangle) â†’ Process(rectangle) â†’ Decision(diamond)

   Mermaid:
   \`\`\`mermaid
   graph LR
       Start[å¼€å§‹] --> Process[å¤„ç†]
       Process --> Decision{åˆ¤æ–­}
   \`\`\`

ğŸ¤– AI-assisted conversion:
You can:
1. Screenshot the Visio diagram
2. Send it to me with a description
3. I'll generate the corresponding Mermaid code

âš™ï¸ Automation tools:
- vsdx2svg: Convert to SVG first, then manually to Mermaid
- Use Draw.io as an intermediate format`}
</CodeBlock>

  </TabItem>
</Tabs>

## ğŸš€ Advanced AI Techniques

### Complex System Architecture Generation

<CodeBlock language="text">
{`You: Generate a complete microservices architecture diagram for an e-commerce platform, including all key components

Gemini: I'll generate a complete e-commerce microservices architecture diagram for you:

\`\`\`mermaid
graph TB
    subgraph "å®¢æˆ·ç«¯å±‚"
        Web[Webåº”ç”¨]
        Mobile[ç§»åŠ¨APP]
        Admin[ç®¡ç†åå°]
    end
    
    subgraph "æ¥å…¥å±‚"
        CDN[CDN]
        LB[è´Ÿè½½å‡è¡¡å™¨]
        Gateway[APIç½‘å…³]
    end
    
    subgraph "ä¸šåŠ¡æœåŠ¡å±‚"
        subgraph "æ ¸å¿ƒæœåŠ¡"
            UserSvc[ç”¨æˆ·æœåŠ¡]
            ProductSvc[å•†å“æœåŠ¡]
            OrderSvc[è®¢å•æœåŠ¡]
            PaymentSvc[æ”¯ä»˜æœåŠ¡]
        end
        
        subgraph "æ”¯æ’‘æœåŠ¡"
            SearchSvc[æœç´¢æœåŠ¡]
            RecSvc[æ¨èæœåŠ¡]
            CartSvc[è´­ç‰©è½¦æœåŠ¡]
            InventorySvc[åº“å­˜æœåŠ¡]
        end
        
        subgraph "è¿è¥æœåŠ¡"
            PromotionSvc[ä¿ƒé”€æœåŠ¡]
            CouponSvc[ä¼˜æƒ åˆ¸æœåŠ¡]
            CommentSvc[è¯„ä»·æœåŠ¡]
            LogisticsSvc[ç‰©æµæœåŠ¡]
        end
    end
    
    subgraph "ä¸­é—´ä»¶å±‚"
        MQ[æ¶ˆæ¯é˜Ÿåˆ—<br/>RabbitMQ/Kafka]
        Cache[ç¼“å­˜<br/>Redis Cluster]
        Registry[æœåŠ¡æ³¨å†Œ<br/>Consul/Eureka]
        Config[é…ç½®ä¸­å¿ƒ<br/>Apollo]
    end
    
    subgraph "æ•°æ®å±‚"
        MySQL[(MySQL<br/>ä¸»ä»é›†ç¾¤)]
        MongoDB[(MongoDB<br/>åˆ†ç‰‡é›†ç¾¤)]
        ES[(ElasticSearch<br/>æœç´¢å¼•æ“)]
        HBase[(HBase<br/>å¤§æ•°æ®å­˜å‚¨)]
    end
    
    subgraph "åŸºç¡€è®¾æ–½"
        Monitor[ç›‘æ§<br/>Prometheus]
        Log[æ—¥å¿—<br/>ELK Stack]
        Trace[é“¾è·¯è¿½è¸ª<br/>Zipkin]
        Alert[å‘Šè­¦<br/>AlertManager]
    end
    
    %% è¿æ¥å…³ç³»
    Web --> CDN
    Mobile --> CDN
    Admin --> LB
    CDN --> LB
    LB --> Gateway
    
    Gateway --> UserSvc
    Gateway --> ProductSvc
    Gateway --> OrderSvc
    Gateway --> PaymentSvc
    
    OrderSvc --> MQ
    PaymentSvc --> MQ
    MQ --> InventorySvc
    MQ --> LogisticsSvc
    
    ProductSvc --> Cache
    CartSvc --> Cache
    
    UserSvc --> MySQL
    OrderSvc --> MySQL
    ProductSvc --> MongoDB
    SearchSvc --> ES
    
    %% æ ·å¼
    classDef client fill:#e3f2fd,stroke:#1976d2
    classDef gateway fill:#fff3e0,stroke:#f57c00
    classDef service fill:#f3e5f5,stroke:#7b1fa2
    classDef middleware fill:#e8f5e9,stroke:#388e3c
    classDef data fill:#fce4ec,stroke:#c2185b
    classDef infra fill:#f5f5f5,stroke:#616161
    
    class Web,Mobile,Admin client
    class CDN,LB,Gateway gateway
    class UserSvc,ProductSvc,OrderSvc,PaymentSvc,SearchSvc,RecSvc,CartSvc,InventorySvc,PromotionSvc,CouponSvc,CommentSvc,LogisticsSvc service
    class MQ,Cache,Registry,Config middleware
    class MySQL,MongoDB,ES,HBase data
    class Monitor,Log,Trace,Alert infra
\`\`\`

Architecture Features:
1. Clear layering: 6-layer architecture with distinct responsibilities
2. Service decoupling: Asynchronous communication via message queues
3. High availability: Multi-level caching, service discovery
4. Observability: Complete monitoring, logging, tracing
5. Scalability: Microservices architecture, independent deployment and scaling`}
</CodeBlock>

### Automatic Documentation Generation

<Admonition type="tip" title="AI Batch Generation of Documentation Diagrams">
Use Gemini CLI to automatically generate diagrams from code or documentation:

<CodeBlock language="text">
{`You: Generate sequence diagrams for all endpoints based on this API documentation

Gemini: I'll batch generate sequence diagrams for your API documentation:

# API Sequence Diagram Documentation

## 1. User Authentication Module

### 1.1 Registration Endpoint
\`\`\`mermaid
sequenceDiagram
    participant C as Client
    participant A as API
    participant V as Validator
    participant D as Database
    participant E as Email Service
    
    C->>A: POST /auth/register
    A->>V: éªŒè¯è¾“å…¥æ•°æ®
    V-->>A: éªŒè¯é€šè¿‡
    A->>D: æ£€æŸ¥é‚®ç®±æ˜¯å¦å­˜åœ¨
    D-->>A: é‚®ç®±å¯ç”¨
    A->>D: åˆ›å»ºç”¨æˆ·è®°å½•
    D-->>A: ç”¨æˆ·åˆ›å»ºæˆåŠŸ
    A->>E: å‘é€éªŒè¯é‚®ä»¶
    E-->>A: é‚®ä»¶å·²å‘é€
    A-->>C: 201 Created
\`\`\`

### 1.2 Login Endpoint
[Continue generating other endpoints...]

## Automation Scripts
You can use the following scripts for batch generation:

\`\`\`javascript
// Read OpenAPI specification
const spec = require('./openapi.json');

// Generate Mermaid diagrams for each endpoint
Object.keys(spec.paths).forEach(path => {
  Object.keys(spec.paths[path]).forEach(method => {
    const operation = spec.paths[path][method];
    generateSequenceDiagram(path, method, operation);
  });
});
\`\`\``}
</CodeBlock>
</Admonition>

## ğŸ’¡ Prompt Engineering

### Efficient Prompt Templates

<div className="prompt-templates">
  <div className="template">
    <h4>ğŸ“Š Flowchart Generation</h4>
    <CodeBlock language="text">
{`Generate a flowchart for [topic], including:
1. [Step 1]
2. [Step 2]
3. [Decision conditions]
4. [Error handling]
Requirements:
- Use Mermaid syntax
- Include start and end nodes
- Mark key decision points
- Add necessary loops`}
    </CodeBlock>
  </div>

  <div className="template">
    <h4>ğŸ—ï¸ Architecture Diagram Design</h4>
    <CodeBlock language="text">
{`Design an architecture diagram for [system name]:
Tech stack: [list technologies]
Scale: [user volume/QPS]
Requirements:
- Layered display
- Mark technology choices
- Show data flow
- Include redundancy design`}
    </CodeBlock>
  </div>

  <div className="template">
    <h4>ğŸ”„ Optimization Request</h4>
    <CodeBlock language="text">
{`Optimize this diagram:
[paste existing code]
Optimization directions:
- Improve readability
- Optimize layout
- Unify style
- Add missing information`}
    </CodeBlock>
  </div>
</div>

## ğŸ¯ Practical Case Studies

### Case Study: From Requirements to Diagrams

<CodeBlock language="text">
{`Requirement Description:
"We need a complete user order process, from selecting products to receiving and reviewing"

Gemini Generation Process:

Step 1: Understanding requirements
- Identify participants: user, system, payment, logistics
- Outline main process: browse â†’ order â†’ pay â†’ ship â†’ receive
- Consider exceptions: out of stock, payment failure, returns

Step 2: Generate basic diagram
\`\`\`mermaid
graph TD
    Start[ç”¨æˆ·æµè§ˆå•†å“] --> Select[é€‰æ‹©å•†å“]
    Select --> Cart[åŠ å…¥è´­ç‰©è½¦]
    Cart --> Checkout[ç»“ç®—]
    Checkout --> Pay[æ”¯ä»˜]
    Pay --> Success[æ”¯ä»˜æˆåŠŸ]
    Success --> Ship[å‘è´§]
    Ship --> Receive[æ”¶è´§]
    Receive --> Review[è¯„ä»·]
    Review --> End[å®Œæˆ]
\`\`\`

Step 3: Add exception handling
\`\`\`mermaid
graph TD
    Start[ç”¨æˆ·æµè§ˆå•†å“] --> Select[é€‰æ‹©å•†å“]
    Select --> Stock{åº“å­˜å……è¶³?}
    Stock -->|å¦| StockOut[æç¤ºç¼ºè´§]
    StockOut --> Select
    Stock -->|æ˜¯| Cart[åŠ å…¥è´­ç‰©è½¦]
    Cart --> Checkout[ç»“ç®—]
    Checkout --> Pay[æ”¯ä»˜]
    Pay --> PayResult{æ”¯ä»˜æˆåŠŸ?}
    PayResult -->|å¦| PayFail[æ”¯ä»˜å¤±è´¥]
    PayFail --> Pay
    PayResult -->|æ˜¯| Ship[å‘è´§]
    Ship --> Receive[æ”¶è´§]
    Receive --> Confirm{ç¡®è®¤æ”¶è´§?}
    Confirm -->|æ˜¯| Review[è¯„ä»·]
    Confirm -->|å¦| Return[é€€è´§æµç¨‹]
    Review --> End[å®Œæˆ]
    Return --> Refund[é€€æ¬¾]
    Refund --> End
\`\`\`

Step 4: Optimize style and layout
[Final optimized version...]`}
</CodeBlock>

## ğŸš€ Next Steps

After mastering AI-assisted techniques, start practicing:

<div className="next-steps">
  <a href="../projects" className="next-button">
    Practical Project Exercises â†’
  </a>
</div>

<style>{`
.ai-suggestions {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
  margin: 2rem 0;
}

.suggestion-card {
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  padding: 1.5rem;
  border-radius: 8px;
}

.prompt-templates {
  display: grid;
  gap: 1.5rem;
  margin: 2rem 0;
}

.template {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.next-steps {
  display: flex;
  justify-content: center;
  margin: 3rem 0;
}

.next-button {
  display: inline-block;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 1rem 2rem;
  border-radius: 8px;
  text-decoration: none;
  font-weight: bold;
  transition: transform 0.3s ease;
}

.next-button:hover {
  transform: translateY(-2px);
  color: white;
}
`}</style>